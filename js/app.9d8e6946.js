(function(t){function e(e){for(var r,i,s=e[0],c=e[1],u=e[2],l=0,f=[];l<s.length;l++)i=s[l],o[i]&&f.push(o[i][0]),o[i]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);d&&d(e);while(f.length)f.shift()();return a.push.apply(a,u||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],r=!0,i=1;i<n.length;i++){var c=n[i];0!==o[c]&&(r=!1)}r&&(a.splice(e--,1),t=s(s.s=n[0]))}return t}var r={},o={app:0},a=[];function i(t){return s.p+"js/"+({about:"about"}[t]||t)+"."+{about:"40982c22"}[t]+".js"}function s(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.e=function(t){var e=[],n=o[t];if(0!==n)if(n)e.push(n[2]);else{var r=new Promise(function(e,r){n=o[t]=[e,r]});e.push(n[2]=r);var a,c=document.createElement("script");c.charset="utf-8",c.timeout=120,s.nc&&c.setAttribute("nonce",s.nc),c.src=i(t),a=function(e){c.onerror=c.onload=null,clearTimeout(u);var n=o[t];if(0!==n){if(n){var r=e&&("load"===e.type?"missing":e.type),a=e&&e.target&&e.target.src,i=new Error("Loading chunk "+t+" failed.\n("+r+": "+a+")");i.type=r,i.request=a,n[1](i)}o[t]=void 0}};var u=setTimeout(function(){a({type:"timeout",target:c})},12e4);c.onerror=c.onload=a,document.head.appendChild(c)}return Promise.all(e)},s.m=t,s.c=r,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)s.d(n,r,function(e){return t[e]}.bind(null,r));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/",s.oe=function(t){throw console.error(t),t};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],u=c.push.bind(c);c.push=e,c=c.slice();for(var l=0;l<c.length;l++)e(c[l]);var d=u;a.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";var r=n("64a9"),o=n.n(r);o.a},"0529":function(t,e,n){"use strict";var r=n("c0dc"),o=n.n(r);o.a},"1f82":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("f751"),n("097d");var r=n("2b0e"),o=n("d847"),a=n.n(o),i=n("795b"),s=n.n(i),c=n("bc3a"),u=n.n(c),l={},d=u.a.create(l);d.interceptors.request.use(function(t){return t},function(t){return s.a.reject(t)}),d.interceptors.response.use(function(t){return t},function(t){return s.a.reject(t)}),Plugin.install=function(t,e){t.axios=d,window.axios=d,a()(t.prototype,{axios:{get:function(){return d}},$axios:{get:function(){return d}}})},r["a"].use(Plugin);Plugin;var f=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("div",{attrs:{id:"nav"}}),n("transition",{attrs:{name:"fade",mode:"out-in"}},[n("router-view")],1)],1)},p=[],m=(n("034f"),n("2877")),v={},h=Object(m["a"])(v,f,p,!1,null,null,null),g=h.exports,b=n("8c4f"),x=function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.loading?r("div",{staticClass:"container"},[r("div",{staticClass:"text-white topContainer"},[r("router-link",{attrs:{to:{name:"login"}}},[t._v("Atras")]),r("h2",{staticClass:"p-3"},[t._v("Chats activos")]),r("div",{staticClass:"searchContainer shadow-lg"},[r("div",{staticClass:"bg-white p-2"},[r("div",{staticClass:"w-4/5 colorGris mx-auto text-center flex items-center border border-white p-2 rounded"},[r("img",{staticClass:"w-8",attrs:{src:n("5e60")}}),r("input",{directives:[{name:"model",rawName:"v-model",value:t.busqueda,expression:"busqueda"}],staticClass:"inputSearch p-2 w-full ml-3 text-center",attrs:{type:"text",placeholder:"BÃºsqueda"},domProps:{value:t.busqueda},on:{input:function(e){e.target.composing||(t.busqueda=e.target.value)}}})])])])],1),r("div",{staticClass:"listContainer p-3"},t._l(t.arrayFiltrado,function(e){return r("div",{key:e.id},[r("router-link",{staticClass:"chatInfo bg-white flex flex-row mx-auto text-center items-center justify-center p-2 mb-2",attrs:{to:{name:"chat",params:{emisor:t.yo,receptor:e.id}}}},[r("div",{staticClass:"p-2"},[r("img",{staticClass:"imagenChat object-cover",attrs:{alt:"usuario",src:e.fields.Imagen}})]),r("div",{staticClass:"mx-auto text-left"},[r("h5",{staticClass:"text-2xl"},[t._v(t._s(e.fields.Username))]),r("p",[t._v("Lorem ipsum dolor sit magnam in reiciendis est")])]),r("div",{staticClass:"mx-auto text-center"},[r("img",{staticClass:"w-8",attrs:{src:n("f4d8")}})])])],1)}),0)]):r("Loading")},w=[],y=(n("6762"),n("2fdb"),n("5d73")),C=n.n(y),_=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},j=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"loadingContainer fixed pin"},[n("p",{staticClass:"text-white"},[t._v("Cargando datos, espere un segundo ...")]),n("div",{staticClass:"lds-dual-ring"})])}],k={name:"Loading"},E=k,R=(n("8c0c"),Object(m["a"])(E,_,j,!1,null,"29c0f504",null)),U=R.exports,A={name:"list",components:{Loading:U},data:function(){return{arrayUsers:[],loading:!1,yo:"",nombre:"",busqueda:"",prevRuta:""}},beforeRouteEnter:function(t,e,n){n(function(t){t.prevRuta=e.path})},mounted:function(){this.yo=this.$route.params.emisor,this.getUsername(this.yo)},methods:{getAll:function(){var t=this;axios.get("https://api.airtable.com/v0/appXjiwAioymjZHIB/Usuarios?view=Grid%20view").then(function(e){var n=!0,r=!1,o=void 0;try{for(var a,i=C()(e.data.records);!(n=(a=i.next()).done);n=!0){var s=a.value;s.fields.Username==t.nombre||t.arrayUsers.push(s)}}catch(c){r=!0,o=c}finally{try{n||null==i.return||i.return()}finally{if(r)throw o}}t.loading=!0}).catch(function(t){console.log(t)}).then(function(){})},getUsername:function(t){var e=this;axios.get("https://api.airtable.com/v0/appXjiwAioymjZHIB/Usuarios/".concat(t)).then(function(t){e.nombre=t.data.fields.Username,e.getAll()}).catch(function(t){console.log(t)}).then(function(){})}},computed:{arrayFiltrado:function(){var t=[],e=!0,n=!1,r=void 0;try{for(var o,a=C()(this.arrayUsers);!(e=(o=a.next()).done);e=!0){var i=o.value;(""==this.busqueda||i.fields.Username.toUpperCase().includes("".concat(this.busqueda.toUpperCase())))&&t.push(i)}}catch(s){n=!0,r=s}finally{try{e||null==a.return||a.return()}finally{if(n)throw r}}return t}}},O=A,P=(n("5f98"),Object(m["a"])(O,x,w,!1,null,"5bf590cc",null)),M=P.exports,N=function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.loading?r("div",{staticClass:"chat"},[r("div",{staticClass:"userInfo mx-auto text-center pt-10"},[r("div",{staticClass:"w-4/5 flex items-center"},[r("router-link",{attrs:{to:{name:"list"}}},[t._v("Atras")]),r("img",{staticClass:"circle object-cover",attrs:{src:t.imagenReceptor}}),r("div",{staticClass:"bg-white p-5 w-full"},[r("h5",{staticClass:"text-2xl pl-3"},[t._v(t._s(t.nombreReceptor))])])],1)]),r("div",{staticClass:"chatContainer mx-auto text-center pt-10"},[t._l(t.enviados,function(e){return r("div",{key:e.id,staticClass:"p-4 w-full"},[e.fields.Emisor==t.emisor2?r("div",{staticClass:"flex flex-row-reverse"},[r("p",{staticClass:"w-4/5"},[t._v(t._s(e.fields.Texto)+" \n          "),r("img",{staticClass:"p-4",attrs:{src:n("f05f")}})])]):r("div",{staticClass:"flex flex-row"},[r("p",{staticClass:"w-4/5"},[t._v(t._s(e.fields.Texto)+" \n          "),r("img",{staticClass:"p-4",attrs:{src:n("c546")}})])])])}),r("div",{staticClass:"inputContainer flex flex-row items-center justify-center"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.textoNuevo,expression:"textoNuevo"}],staticClass:"p-2 w-4/5 border border-black rounded pin-b pin-r pin-l",attrs:{type:"text"},domProps:{value:t.textoNuevo},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.sendMensaje(e)},input:function(e){e.target.composing||(t.textoNuevo=e.target.value)}}}),""!=t.textoNuevo?r("button",{on:{click:function(e){return e.preventDefault(),t.sendMensaje(e)}}},[r("img",{staticClass:"p-2 w-10 border border-black rounded bg-white",attrs:{src:n("977d")}})]):t._e()])],2)]):r("Loading")},I=[],B={name:"chat",components:{Loading:U},props:["emisor","receptor"],data:function(){return{receptor2:0,emisor2:0,nombreEmisor:"",nombreReceptor:"",imagenReceptor:"",enviados:[],loading:!1,textoNuevo:"",tiempoRefresco:1e4,prevRuta:""}},beforeRouteEnter:function(t,e,n){n(function(t){t.prevRuta=e.path})},mounted:function(){this.receptor2=this.$route.params.receptor,this.emisor2=this.$route.params.emisor,this.getAll(this.emisor2,this.receptor2),setInterval(this.refreshMessages,this.tiempoRefresco)},methods:{getAll:function(t,e){var n=this;axios.get("https://api.airtable.com/v0/appXjiwAioymjZHIB/Usuarios/".concat(t)).then(function(t){n.nombreEmisor=t.data.fields.Username,axios.get("https://api.airtable.com/v0/appXjiwAioymjZHIB/Usuarios/".concat(e)).then(function(t){n.nombreReceptor=t.data.fields.Username,n.imagenReceptor=t.data.fields.Imagen,n.refreshMessages()}).catch(function(t){console.log(t)}).then(function(){})}).catch(function(t){console.log(t)}).then(function(){})},sendMensaje:function(){var t=this;axios.post("https://api.airtable.com/v0/appXjiwAioymjZHIB/Mensajes",{fields:{Texto:t.textoNuevo,Emisor:[t.emisor2],Receptor:[t.receptor2]}}).then(function(e){t.refreshMessages(),t.textoNuevo=""}).catch(function(t){console.log(t)}).then(function(){})},refreshMessages:function(){var t=this;axios.get('https://api.airtable.com/v0/appXjiwAioymjZHIB/Mensajes?view=Grid%20view&filterByFormula=OR(AND({Emisor}="'.concat(t.nombreEmisor,'", {Receptor}="').concat(t.nombreReceptor,'"), AND({Emisor}="').concat(t.nombreReceptor,'", {Receptor}="').concat(t.nombreEmisor,'"))')).then(function(e){e.data.records.length!=t.enviados.length&&(t.enviados=e.data.records,t.loading=!0)}).catch(function(t){console.log(t)}).then(function(){})}},updated:function(){window.scrollTo(0,document.body.scrollHeight)}},$=B,q=(n("f796"),Object(m["a"])($,N,I,!1,null,"118a16d6",null)),H=q.exports,T=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"loginContainer p-10"},[n("h2",{staticClass:"p-5"},[t._v("Login chat Hacendado")]),n("select",{directives:[{name:"model",rawName:"v-model",value:t.seleccionado,expression:"seleccionado"}],staticClass:"m-4",on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.seleccionado=e.target.multiple?n:n[0]}}},[n("option",{attrs:{value:"",disabled:"",selected:""}},[t._v("Elige un usuario")]),t._l(t.users,function(e){return n("option",{key:e.id,domProps:{value:e.id}},[n("p",[t._v(t._s(e.fields.Username))])])})],2),n("router-link",{attrs:{to:{name:"list",params:{emisor:t.seleccionado}}}},[""!=t.seleccionado?n("button",{staticClass:"text-center mx-auto border border-black p-2 block w-1/2 bg-white text-black hover:bg-black hover:text-white"},[t._v("Entrar")]):t._e()])],1)},L=[],Z={name:"login",data:function(){return{users:[],seleccionado:""}},mounted:function(){var t=this;axios.get("https://api.airtable.com/v0/appXjiwAioymjZHIB/Usuarios?view=Grid%20view").then(function(e){t.users=e.data.records}).catch(function(t){console.log(t)}).then(function(){})}},X=Z,S=(n("0529"),Object(m["a"])(X,T,L,!1,null,"0a10ede7",null)),F=S.exports;r["a"].use(b["a"]);var G=new b["a"]({routes:[{path:"/",name:"login",component:F},{path:"/list/:emisor",name:"list",component:M},{path:"/chat/:emisor/:receptor",name:"chat",component:H},{path:"/about",name:"about",component:function(){return n.e("about").then(n.bind(null,"f820"))}}]});r["a"].config.productionTip=!1,window.myVue=r["a"],axios.defaults.headers.common["Authorization"]="Bearer keyB0KkFcdOsZelFg",new r["a"]({router:G,render:function(t){return t(g)}}).$mount("#app")},"5e60":function(t,e,n){t.exports=n.p+"img/search.c6a0effb.svg"},"5f98":function(t,e,n){"use strict";var r=n("c199"),o=n.n(r);o.a},"64a9":function(t,e,n){},"8c0c":function(t,e,n){"use strict";var r=n("e9fc"),o=n.n(r);o.a},"977d":function(t,e,n){t.exports=n.p+"img/send.45a093a5.svg"},c0dc:function(t,e,n){},c199:function(t,e,n){},c546:function(t,e,n){t.exports=n.p+"img/barra2.f63cc187.svg"},e9fc:function(t,e,n){},f05f:function(t,e,n){t.exports=n.p+"img/barrachat.4fd6bf39.svg"},f4d8:function(t,e,n){t.exports=n.p+"img/arrow.c4eea05e.svg"},f796:function(t,e,n){"use strict";var r=n("1f82"),o=n.n(r);o.a}});
//# sourceMappingURL=app.9d8e6946.js.map